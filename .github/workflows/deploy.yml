name: è‡ªåŠ¨æ„å»ºå¹¶éƒ¨ç½²åˆ°FTP

# è§¦å‘æ¡ä»¶ï¼šå½“æ¨é€åˆ° main åˆ†æ”¯æ—¶ (å¦‚æœä½ åˆ†æ”¯å« masterï¼Œè¯·æŠŠä¸‹é¢æ”¹æˆ master)
on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      # 1. æŠŠä»£ç æ‹‰å–ä¸‹æ¥
      - name: è·å–ä»£ç  ğŸ›ï¸
        uses: actions/checkout@v4

      # 2. å®‰è£… Node.js ç¯å¢ƒ (æ‰“åŒ…ç”¨çš„å¨å…·)
      - name: å®‰è£… Node.js âš™ï¸
        uses: actions/setup-node@v4
        with:
          node-version: "24" # ä½¿ç”¨ Node 24

      # 3. å®‰è£…ä¾èµ–å¹¶æ‰“åŒ… (å¼€å§‹åšèœ)
      - name: å®‰è£…ä¾èµ–å¹¶æ‰“åŒ… ğŸ”§
        run: |
          npm install
          npm run build
        # è¿™æ­¥è¿è¡Œå®Œï¼Œä¼šç”Ÿæˆ dist æ–‡ä»¶å¤¹

      # 4. æŠŠ dist æ–‡ä»¶å¤¹æ¨é€åˆ°æœåŠ¡å™¨ (ä¸Šèœ)
      - name: FTP éƒ¨ç½² ğŸš€
        uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        with:
          server: ${{ secrets.FTP_HOST }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          # è¿™æ˜¯ä½  Vue æ‰“åŒ…åçš„æ–‡ä»¶å¤¹
          local-dir: ./dist/
          # è¿™æ˜¯æœåŠ¡å™¨ä¸Šçš„ç›®æ ‡ç›®å½• (æ ¹æ®ä½ ä¹‹å‰æˆªå›¾ï¼Œè¿™é‡Œæ˜¯ wwwroot)
          server-dir: ./wwwroot/
          # å±é™©æ“ä½œï¼šä¸ºäº†ä¿æŒåŒæ­¥ï¼Œä¼šåˆ é™¤æœåŠ¡å™¨ä¸Šå­˜åœ¨ä½†æœ¬åœ°ä¸å­˜åœ¨çš„æ–‡ä»¶ (å»ºè®®åˆæ¬¡ä½¿ç”¨è®¾ä¸º falseï¼Œç†Ÿç»ƒåæ”¹ä¸º true)
          dangerous-clean-slate: true
          # ğŸ‘‡ æ–°å¢è¿™ä¸€è¡Œï¼šå¼ºåˆ¶ä¸ä½¿ç”¨å®‰å…¨åè®®ï¼ˆå¯¹åº” FileZilla çš„â€œåªä½¿ç”¨æ˜æ–‡ FTPâ€ï¼‰
          security: false
